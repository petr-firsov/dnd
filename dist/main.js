(()=>{"use strict";const e=Array.from(document.querySelectorAll(".card-box"));function t(e){e.preventDefault();let t=e.target;t.classList.add("dragged");let n=t.getBoundingClientRect(),d=e.clientY-n.y,c=e.clientX-n.x;document.documentElement.addEventListener("mouseover",(e=>{t.style.top=e.clientY-d+"px",t.style.left=e.clientX-c+"px"}))}function n(){if(document.querySelector(".dragged")){let e=document.querySelector(".dragged");document.querySelector(".space")&&document.querySelector(".space").replaceWith(e),e.classList.remove("dragged"),e=void 0}}function d(e){if(document.querySelector(".dragged")&&!e.target.classList.contains("dragged")){document.querySelector(".space")&&document.querySelector(".space").remove();let t=document.querySelector(".dragged"),n=document.createElement("div");n.style.width=t.getBoundingClientRect().width+"px",n.style.height=t.getBoundingClientRect().height+"px",n.classList.add("space");let d=e.target.getBoundingClientRect().top,c=e.target.getBoundingClientRect().bottom,o=d+e.target.getBoundingClientRect().height/2;d<=e.clientY&&e.clientY<o?e.target.insertAdjacentElement("beforebegin",n):o<e.clientY&&e.clientY<=c&&e.target.insertAdjacentElement("afterend",n)}}function c(){Array.from(document.getElementsByClassName("card")).forEach((e=>{e.addEventListener("mousedown",t),document.documentElement.addEventListener("mouseup",n),e.addEventListener("mouseover",d)}))}function o(){const e=document.querySelectorAll(".remove-button");for(let t=0;t<e.length;t++)e[t].addEventListener("click",(()=>{e[t].parentElement.remove()}))}!function(){const t=document.querySelectorAll(".add-link");for(let n=0;n<t.length;n++)t[n].addEventListener("click",(d=>{d.target.setAttribute("hidden","");const r=document.createElement("form");r.classList.add("add-card-form"),e[n].appendChild(r);const a=document.createElement("textarea");a.setAttribute("placeholder","Enter a title for this card..."),r.appendChild(a),a.focus();const l=document.createElement("button");l.classList.add("add-button"),l.textContent="Add button",r.appendChild(l);const i=document.createElement("div");i.classList.add("cancel-button"),i.innerHTML="&#x2715;",r.appendChild(i),r.addEventListener("submit",(d=>{if(d.preventDefault(),a.value){const t=document.createElement("div");t.classList.add("card");const d=document.createElement("p");d.classList.add("card-text"),d.innerText=a.value,t.appendChild(d);const r=document.createElement("div");r.classList.add("remove-button"),r.innerHTML="<div>&#x2715;</div>",t.append(r),e[n].appendChild(t),c(),o()}r.remove(),t[n].removeAttribute("hidden","")})),i.addEventListener("click",(()=>{r.remove(),t[n].removeAttribute("hidden","")}))}))}(),window.addEventListener("beforeunload",(function(){let t={};for(let n=0;n<e.length;n++){let d=[];Array.from(e[n].children).forEach((e=>{let t=e.firstChild;d.push(t.textContent)})),t[n]=d}localStorage.setItem("formData",JSON.stringify(t))})),document.addEventListener("DOMContentLoaded",(function(){const t=localStorage.getItem("formData");let n=JSON.parse(t);if(n){let t=[];for(let e in n)t.push(n[e]);for(let n=0;n<t.length;n++)for(let d=0;d<t[n].length;d++){let c=document.createElement("div");c.classList.add("card"),c.textContent=t[n][d];const o=document.createElement("div");o.classList.add("remove-button"),o.innerHTML="<div>&#x2715;</div>",c.append(o),e[n].appendChild(c)}c(),o()}}))})();