(()=>{"use strict";const e=Array.from(document.querySelectorAll(".card-box"));function t(e){e.preventDefault();let t=e.target;t.classList.add("dragged");let n=e.target.parentElement;t.style.width=n.clientWidth-15+"px";let d=t.getBoundingClientRect(),o=e.clientY-d.y,r=e.clientX-d.x;document.documentElement.addEventListener("mousemove",(e=>{document.querySelector(".dragged")&&(t.style.top=e.clientY-o+"px",t.style.left=e.clientX-r+"px")}))}function n(){if(document.querySelector(".dragged")){let e=document.querySelector(".dragged");document.querySelector(".space")&&document.querySelector(".space").replaceWith(e),e.classList.remove("dragged"),e.style=void 0,e=void 0}}function d(e){if(document.querySelector(".dragged")&&!e.target.classList.contains("dragged")){document.querySelector(".space")&&document.querySelector(".space").remove();let t=document.querySelector(".dragged"),n=document.createElement("div");n.style.width=t.getBoundingClientRect().width+"px",n.style.height=t.getBoundingClientRect().height+"px",n.classList.add("space");let d=e.target.getBoundingClientRect().top,o=e.target.getBoundingClientRect().bottom,r=d+e.target.getBoundingClientRect().height/2;d<=e.clientY&&e.clientY<r?e.target.insertAdjacentElement("beforebegin",n):r<e.clientY&&e.clientY<=o&&e.target.insertAdjacentElement("afterend",n)}}function o(){Array.from(document.getElementsByClassName("card")).forEach((e=>{e.addEventListener("mousedown",t),document.documentElement.addEventListener("mouseup",n),e.addEventListener("mouseover",d)}))}function r(){const e=document.querySelectorAll(".remove-button");for(let t=0;t<e.length;t++)e[t].addEventListener("click",(()=>{e[t].parentElement.remove()}))}!function(){const t=document.querySelectorAll(".add-link");for(let n=0;n<t.length;n++)t[n].addEventListener("click",(d=>{d.target.setAttribute("hidden","");const c=document.createElement("form");c.classList.add("add-card-form"),e[n].appendChild(c);const l=document.createElement("textarea");l.setAttribute("placeholder","Enter a title for this card..."),c.appendChild(l),l.focus();const a=document.createElement("button");a.classList.add("add-button"),a.textContent="Add button",c.appendChild(a);const i=document.createElement("div");i.classList.add("cancel-button"),i.innerHTML="&#x2715;",c.appendChild(i),c.addEventListener("submit",(d=>{if(d.preventDefault(),l.value){const t=document.createElement("div");t.classList.add("card"),t.innerText=l.value;const d=document.createElement("div");d.classList.add("remove-button"),d.innerHTML="<div>&#x2715;</div>",t.append(d),e[n].appendChild(t),o(),r()}c.remove(),t[n].removeAttribute("hidden","")})),i.addEventListener("click",(()=>{c.remove(),t[n].removeAttribute("hidden","")}))}))}(),window.addEventListener("beforeunload",(function(){let t={};for(let n=0;n<e.length;n++){let d=[];Array.from(e[n].children).forEach((e=>{let t=e.firstChild;d.push(t.textContent)})),t[n]=d}localStorage.setItem("formData",JSON.stringify(t))})),document.addEventListener("DOMContentLoaded",(function(){const t=localStorage.getItem("formData");let n=JSON.parse(t);if(n){let t=[];for(let e in n)t.push(n[e]);for(let n=0;n<t.length;n++)for(let d=0;d<t[n].length;d++){let o=document.createElement("div");o.classList.add("card"),o.textContent=t[n][d];const r=document.createElement("div");r.classList.add("remove-button"),r.innerHTML="<div>&#x2715;</div>",o.append(r),e[n].appendChild(o)}o(),r()}}))})();